<!-- ################################################################################################################## -->
<!--                                        Section for general Configuration                                           -->
<!-- ################################################################################################################## -->
{% extends "main/base.project.html" %} 
{% block title %}Projekt Statistiken{% endblock %}

{% block projectnavigation %}
<ul class="nav nav-tabs nav-overflow header-tabs">
  <li class="nav-item">
    <a href="/dashboard/{{current_project['result-set-data'][0]['id']}}" class="nav-link">
      Dashboard
    </a>
  </li>
  <li class="nav-item">
    <a href="/kanban/{{current_project['result-set-data'][0]['id']}}" class="nav-link">
      Kanban
    </a>
  </li>
  <li class="nav-item">
    <a href="/statisticsproject/{{current_project['result-set-data'][0]['id']}}" class="nav-link active">
      Statistik
    </a>
  </li>
  <li class="nav-item">
    <a href="/projectsettings/{{current_project['result-set-data'][0]['id']}}" class="nav-link">
      Einstellungen
    </a>
  </li>
</ul>
{% endblock %}

<!-- MAIN CONTENT -->
{% block content %}

      <!-- CARDS -->
      <div class="container-fluid">
        <div class="row">
          <div class="col-12 col-lg-6 col-xl">

            <!-- Value  -->
            <div class="card">
              <div class="card-body">
                <div class="row align-items-center gx-0">
                  <div class="col">

                    <!-- Title -->
                    <h6 class="text-uppercase text-muted mb-2">
                      Aufgaben Anzahl
                    </h6>

                    <!-- Heading -->
                    <span class="h2 mb-0">
                      
                        {% if project_tasks['count-result-set'] == null %}
                          0
                        {% elif project_tasks['count-result-set'] > 0 %}
                          {{project_tasks['count-result-set']}}
                        {% endif %}
                      
                    </span>

                    
                  </div>
                  <div class="col-auto">

                    <!-- Icon -->
                    <span class="h2 fe fe-bar-chart text-muted mb-0"></span>

                  </div>
                </div> <!-- / .row -->
              </div>
            </div>

          </div>
          <div class="col-12 col-lg-6 col-xl">

            <!-- Hours -->
            <div class="card">
              <div class="card-body">
                <div class="row align-items-center gx-0">
                  <div class="col">

                    <!-- Title -->
                    <h6 class="text-uppercase text-muted mb-2">
                      Erledigte Aufgaben
                    </h6>

                    <!-- Heading -->
                    <span class="h2 mb-0">
                      6
                    </span>

                  </div>
                  <div class="col-auto">

                    <!-- Icon -->
                    <span class="h2 fe fe-check-circle text-muted mb-0"></span>

                  </div>
                </div> <!-- / .row -->
              </div>
            </div>

          </div>
          <div class="col-12 col-lg-6 col-xl">

            <!-- Card -->
            <div class="card">
              <div class="card-body">
                <div class="row align-items-center gx-0">
                  <div class="col">

                    <!-- Title -->
                    <h6 class="text-uppercase text-muted mb-2">
                      Fortschritt
                    </h6>

                    <div class="row align-items-center g-0">
                      <div class="col-auto">

                        <!-- Heading -->
                        <span class="h2 me-2 mb-0">
                          30%
                        </span>

                      </div>
                      <div class="col">

                        <!-- Progress -->
                        <div class="progress progress-sm me-4">
                          <div class="progress-bar" role="progressbar" style="width: 30%" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>

                      </div>
                    </div> <!-- / .row -->

                  </div>

                </div> <!-- / .row -->

              </div>
            </div>

          </div>
          <div class="col-12 col-lg-6 col-xl">

            <!-- Time -->
            <div class="card">
              <div class="card-body">
                <div class="row align-items-center gx-0">
                  <div class="col">

                    <!-- Title -->
                    <h6 class="text-uppercase text-muted mb-2">
                      Zeit seit Projektstart
                    </h6>

                    <!-- Heading -->
                    <span class="h2 mb-0">
                      4 Tage
                    </span>

                  </div>
                  <div class="col-auto">

                    <!-- Icon -->
                    <span class="h2 fe fe-clock text-muted mb-0"></span>

                  </div>
                </div> <!-- / .row -->
              </div>
            </div>

          </div>
        </div> <!-- / .row -->

        <div class="row">
          <div class="col-12 col-xl-8">

            <!-- Convertions -->
            <div class="card">
              <div class="card-header">

                <!-- Title -->
                <h4 class="card-header-title">
                  Erstellte Aufgaben pro Tag
                </h4>

              </div>
              <div class="card-body">

                <!-- Chart -->
                <div class="chart">
                  <canvas id="conversionsChart" class="chart-canvas"></canvas>
                </div>

              </div>
            </div>
          </div>
          <div class="col-12 col-xl-4">

            <!-- Traffic -->
            <div class="card">
              <div class="card-header">

                <!-- Title -->
                <h4 class="card-header-title">
                  Projektfortschritte
                </h4>

              </div>
              <div class="card-body">

                <!-- Chart -->
                <div class="chart chart-appended">
                  <canvas id="trafficChart" class="chart-canvas" data-toggle="legend" data-target="#trafficChartLegend"></canvas>
                </div>

                <!-- Legend -->
                <div id="trafficChartLegend" class="chart-legend"></div>

              </div>
            </div>
          </div>
        </div> <!-- / .row -->
       
      </div>

    {% endblock %}
    <!-- / .main-content -->

  {% block include_java_script %}

      <script>
        // Convertions chart

const conversionsChart = document.getElementById('conversionsChart');

if (conversionsChart) {
  new Chart(conversionsChart, {
    type: 'bar',
    options: {
      scales: {
        y: {
          ticks: {
            callback: function (val) {
              return val / 2 ;
            },
          },
        },
      },
    },
    data: {

      labels: [
        'Zu erledigen',
        'In Arbeit',
        'Fertig',
      ],
      datasets: [
        {
          label: '2020',
          data: [
          {% if project_tasks['count-result-set'] == null %}
            0
          {% elif project_tasks['count-result-set'] > 0 %}
            {{project_tasks['count-result-set']}} *2
          {% endif %}, 
        2, 30, ],
        },
        {
          label: '2019',
          data: [15, 10, 20,],
          backgroundColor: '#d2ddec',
          hidden: true,
        },
      ],
    },
  });
}

// Traffic chart

const trafficChart = document.getElementById('trafficChart');

if (trafficChart) {
  new Chart(trafficChart, {
    type: 'doughnut',
    options: {
      plugins: {
        tooltip: {
          callbacks: {
            afterLabel: function () {
              return '%';
            },
          },
        },
      },
    },
    data: {
      labels: ['Zu erledigen', 'In Arbeit', 'Fertig'],
      datasets: [
        {
          data: [
          {% if project_tasks['count-result-set'] == null %}
            0
          {% elif project_tasks['count-result-set'] > 0 %}
            {{project_tasks['count-result-set']}} *2
          {% endif %}, 25, 15],
          backgroundColor: ['#2C7BE5', '#A6C5F7', '#D2DDEC'],
        },
        {
          data: [15, 45, 20],
          backgroundColor: ['#2C7BE5', '#A6C5F7', '#D2DDEC'],
          hidden: true,
        },
      ],
    },
  });
}
      </script>

  {% endblock %}


